<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ask Andrew - AI Learning Assistant</title>
    <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>üéì</text></svg>">
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <!-- Skip to main content link for keyboard navigation -->
    <a href="#chat-messages" class="skip-link">Skip to main chat content</a>
    
    <div class="container" role="main" aria-label="Ask Andrew Chat Application">
        <header role="banner">
            <h1 id="app-title">üéì Ask Andrew</h1>
            <p class="subtitle" id="app-subtitle">A sample AI assistant for educational purposes only</p>
        </header>
        
        <div class="chat-wrapper">
            <!-- Model Loading Progress -->
            <div class="progress-section" id="progress-section" role="status" aria-live="polite" aria-label="Model loading progress">
                <div class="progress-content">
                    <img src="images/andrew.png" alt="Andrew the AI assistant preparing to help you learn" class="andrew-image">
                    <h2 class="loading-title" id="loading-title">Andrew is joining the chat...</h2>
                    <div class="progress-bar" role="progressbar" aria-valuenow="0" aria-valuemin="0" aria-valuemax="100" aria-labelledby="progress-text">
                        <div class="progress-fill" id="progress-fill"></div>
                    </div>
                    <p class="progress-text" id="progress-text">Loading model: 0%</p>
                    <p class="progress-info" aria-live="polite">This may take a minute on first load</p>
                </div>
            </div>

            <!-- Chat Interface -->
            <div class="chat-container" id="chat-container" style="display: none;" role="region" aria-labelledby="chat-title">
                <div class="chat-header" role="banner">
                    <div class="header-content">
                        <h2 id="chat-title">üí¨ Chat with Andrew</h2>
                        <div class="header-buttons" role="toolbar" aria-label="Chat controls">
                            <button class="about-btn" id="about-btn" 
                                    title="About this app" 
                                    aria-label="Learn about Ask Andrew">
                                ‚ÑπÔ∏è About
                            </button>
                            <button class="mode-toggle-btn" id="mode-toggle" 
                                    title="Toggle between AI and Simple mode" 
                                    aria-label="Toggle chat mode. Currently in AI mode"
                                    aria-pressed="false">
                                üìù Simple Mode
                            </button>
                            <button class="restart-btn" id="restart-btn" 
                                    title="Restart conversation" 
                                    aria-label="Start a new chat conversation">
                                üîÑ New Chat
                            </button>
                        </div>
                    </div>
                </div>

                <div class="chat-messages" id="chat-messages" role="log" aria-live="polite" aria-relevant="additions" aria-label="Chat conversation">
                    <div class="welcome-message" role="article" aria-label="Welcome message from Andrew">
                        <div class="avatar andrew-avatar" aria-hidden="true">
                            <img src="images/andrew-icon.png" alt="Andrew the AI assistant avatar" class="avatar-image">
                        </div>
                        <div class="message-content">
                            <p class="message-author">Andrew</p>
                            <p>Hi! I'm Andrew, a simple AI assistant. I can help you understand AI concepts. What would you like to learn about today?</p>
                        </div>
                    </div>
                </div>

                <div class="chat-input-area" role="form" aria-label="Message input form">
                    <div class="input-wrapper">
                        <label for="user-input" class="visually-hidden">Your question about AI topics</label>
                        <textarea 
                            id="user-input" 
                            placeholder="Ask a question about AI topics..."
                            rows="1"
                            aria-label="Type your question about AI topics here"
                            aria-describedby="chat-description search-status"
                            aria-required="false"
                        ></textarea>
                        <button id="send-btn" class="send-btn" 
                                title="Send message" 
                                aria-label="Send message"
                                type="submit">
                            <span class="send-icon" aria-hidden="true">‚ñ∂</span>
                        </button>
                    </div>
                    <div class="example-questions">
                        <p class="example-label" id="example-label">Try asking:</p>
                        <div class="example-buttons" role="region" aria-labelledby="example-label">
                            <button class="example-btn" data-question="What's the relationship between machine learning and artificial intelligence?" 
                                    aria-label="Ask about the relationship between machine learning and artificial intelligence">
                                What's the relationship between machine learning and artificial intelligence?
                            </button>
                            <button class="example-btn" data-question="What is generative AI?" 
                                    aria-label="Ask about generative AI">
                                What is generative AI?
                            </button>
                            <button class="example-btn" data-question="How does a large language model work?" 
                                    aria-label="Ask how a large language model works">
                                How does a large language model work?
                            </button>
                            <button class="example-btn" data-question="What is agentic AI?" 
                                    aria-label="Ask about agentic AI">
                                What is agentic AI?
                            </button>
                            <button class="example-btn" data-question="What is computer vision?" 
                                    aria-label="Ask about computer vision">
                                What is computer vision?
                            </button>
                            <button class="example-btn" data-question="Tell me about AI speech" 
                                    aria-label="Ask about AI speech">
                                Tell me about AI speech
                            </button>
                        </div>
                    </div>
                    <div class="input-info">
                        <span id="search-status" class="search-status" role="status" aria-live="polite" aria-atomic="true"></span>
                    </div>
                    <div class="disclaimer">
                        <p>AI-generated content can contain mistakes</p>
                    </div>
                </div>
            </div>
        </div>

        <footer role="contentinfo">
            <p>Powered by WebLLM (Microsoft Phi-3-mini)</p>
        </footer>
    </div>

    <!-- About App Modal -->
    <div id="about-modal" class="modal" role="dialog" aria-labelledby="about-modal-title" aria-modal="true" aria-describedby="about-modal-description" style="display: none;">
        <div class="modal-overlay" aria-hidden="true"></div>
        <div class="modal-content">
            <div class="modal-header">
                <h2 id="about-modal-title">üéì About Ask Andrew</h2>
                <button class="modal-close" id="about-modal-close" aria-label="Close about dialog" title="Close" type="button">√ó</button>
            </div>
            <div class="modal-body" id="about-modal-description">
                <p><strong>Ask Andrew</strong> is a sample AI agent designed to help you understand artificial intelligence concepts and topics.</p>
                <p>üìã <a href="https://microsoftlearning.github.io/ai-apps/" target="_blank" rel="noopener noreferrer">Important details and AI transparency notes (opens in new window)</a></p>
                <h3>Features</h3>
                <ul>
                    <li><strong>Simple Mode:</strong> Search through a curated knowledge base to find answers to your questions</li>
                    <li><strong>AI Mode:</strong> Get detailed explanations generated by an AI model running directly in your browser using WebGPU</li>
                </ul>
                
                <h3>How It Works</h3>
                <p>Ask Andrew uses a local language model that runs entirely in your browser, so your questions remain private. No data is sent to external servers.</p>
                
                <h3>Getting Started</h3>
                <p>Try asking a question like "What is machine learning?" or "Explain artificial intelligence" to get started. You can toggle between Simple and AI mode using the button in the chat header.</p>
            </div>
            <div class="modal-footer">
                <button class="modal-btn" id="about-modal-ok" aria-label="Close about dialog" type="button">Close</button>
            </div>
        </div>
    </div>

    <!-- AI Mode Info Modal -->
    <div id="ai-mode-modal" class="modal" role="dialog" aria-labelledby="modal-title" aria-modal="true" aria-describedby="ai-mode-modal-description" style="display: none;">
        <div class="modal-overlay" aria-hidden="true"></div>
        <div class="modal-content">
            <div class="modal-header">
                <h2 id="modal-title">ü§ñ About AI Mode</h2>
                <button class="modal-close" id="modal-close" aria-label="Close AI mode dialog" title="Close" type="button">√ó</button>
            </div>
            <div class="modal-body" id="ai-mode-modal-description">
                <p>AI mode uses a generative AI model that requires <strong>WebGPU support</strong> in your browser.</p>
                
                <p>If you are using a Windows computer with an ARM64 CPU (such as a Snapdragon processor) that has an integrated GPU, you may need to explicitly enable WebGPU support in your browser's settings:</p>
                
                <ul>
                    <li>In <strong>Microsoft Edge</strong>, go to <code>edge://flags</code></li>
                    <li>In <strong>Google Chrome</strong>, go to <code>chrome://flags</code></li>
                </ul>
                
                <p class="warning"><strong>Remember to disable it again when you're finished!</strong></p>
                
                <p>If your computer doesn't have a GPU, AI mode will be unavailable. You can still use Simple mode to search for answers!</p>
            </div>
            <div class="modal-footer">
                <button class="modal-btn" id="modal-ok" aria-label="Acknowledge AI mode dialog" type="button">Got it!</button>
            </div>
        </div>
    </div>

    <!-- Scripts -->
    <script type="module" src="script.js?v=45"></script>
</body>
</html>
